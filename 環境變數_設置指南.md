# 🔑 環境變數設置指南

## ⚠️ 重要安全說明

**API 金鑰應該保存在後端（Vercel Serverless Functions），不應暴露到前端！**

本專案採用安全架構：
- ✅ API 金鑰只在後端 Serverless Functions 中使用
- ✅ 前端通過 `/api/*` 端點請求後端
- ✅ 金鑰統一在 Vercel 環境變數中管理，不暴露到前端

---

### 🎯 架構說明

```
使用者瀏覽器          前端應用              後端 API              外部服務
    │                  │                    │                    │
    │                  │                    │                    │
    │  輸入 URL        │                    │                    │
    ├────────────────→ │                    │                    │
    │                  │  /api/getVideoInfo │                    │
    │                  ├───────────────────→│                    │
    │                  │                    │  使用 RAPIDAPI_KEY │
    │                  │                    ├───────────────────→│
    │                  │                    │  (安全，不暴露)     │
    │                  │                    │←───────────────────┤
    │                  │←───────────────────┤                    │
    │  顯示結果        │                    │                    │
    │←────────────────┤                    │                    │
```

**金鑰只在後端 Serverless Functions 中使用，前端看不到！**

---

## Vercel 環境變數

1. 進入你的 Vercel 專案設置
2. 找到 **Environment Variables**（環境變數）
3. 添加新變數：
   - **Name**: `RAPIDAPI_KEY`（注意：不要用 `VITE_` 前綴！）
   - **Value**: 你的 RapidAPI 金鑰
   - **Environment**: Production, Preview, Development（全選）
4. 重新部署專案

**為什麼不用 `VITE_` 前綴？**
- ❌ `VITE_RAPIDAPI_KEY` 會被打包到前端，暴露給所有人
- ✅ `RAPIDAPI_KEY` 只存在於後端 Serverless Functions，安全！

---

## 🔐 安全說明

使用 `RAPIDAPI_KEY`（無 `VITE_` 前綴）的好處：

1. **後端專用**：只在 Vercel Serverless Functions 中可用
2. **前端隔離**：前端 JavaScript 無法訪問，不會被打包進 bundle
3. **防止濫用**：即使有人查看網頁源碼或 DevTools，也看不到金鑰
4. **統一管理**：在 Vercel Dashboard 集中管理，方便更新

---

## 💻 本地開發設置（可選）

如果你想在本地開發時使用自己的金鑰：

1. **創建 `.env` 檔案**（在專案根目錄）
   ```bash
   # Windows PowerShell
   New-Item -Path ".env" -ItemType File
   ```

2. **在 `.env` 中添加你的 API 金鑰**
   ```env
   RAPIDAPI_KEY=你的實際金鑰
   ```

3. **重新啟動開發伺服器**
   ```bash
   npm run dev
   ```

**注意：** `.env` 檔案已在 `.gitignore` 中，不會被提交到 Git

---

---

## 如何獲取 RapidAPI 金鑰

### 步驟 1：註冊 RapidAPI
前往 [RapidAPI](https://rapidapi.com/) 註冊帳號

### 步驟 2：訂閱需要的 API

#### API 1: YouTube v31（影片資訊）
- 網址：https://rapidapi.com/ytdlfree/api/youtube-v31
- 點擊 **"Subscribe to Test"**
- 選擇 **Basic 免費方案**（每月 10,000 次請求）

#### API 2: YouTube Captions（字幕提取）
- 網址：https://rapidapi.com/nikzeferis/api/youtube-captions-transcript-subtitles-video-combiner
- 點擊 **"Subscribe to Test"**
- 選擇 **Basic 免費方案**

### 步驟 3：複製 API 金鑰
1. 訂閱後，在 API 頁面找到 **"Code Snippets"**
2. 你會看到類似這樣的金鑰：
   ```
   'x-rapidapi-key': 'abc123def456...'
   ```
3. 複製這串金鑰

---



